<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/stylesheets/style.css">
    <link rel="stylesheet" href="/stylesheets/lists/edit.css">
    <title><%= user.username %>'s <%= list.name %> list</title>
  </head>
  <body>
    <%- include('../partials/_navbar.ejs') %>
    <div id="container">
  <h1>Edit a List</h1>
    <form action="/lists/<%= list._id %>?_method=PUT" method="POST">
        <label for="name">List name:</label>
        <input
          type="text"
          name="name"
          id="name"
          class="input"
          value="<%= list.name || '' %>"
        /><br>

        <label for="description" id="descLabel" class="label">Description:</label>
        <textarea
          name="description"
          id="description"
          class="input"
          ><%= list.description || '' %></textarea><br>

        <h4>Locations:</h4>
        <% let locations = '' %>
        <% if (list.locations.length > 0) {%>
          <ul name="list" id="list">
            <% list.locations.forEach((location, index) => { %>
              <li>
                <%= location.name %>, <%= location.zip %>
                <button
                  type="submit"
                  name="remove"
                  id="remove"
                  class="button"
                  value="<%= index %>"
                  >remove</button>
                <% locations += `${location.name}@${location.zip}#` %>
              </li>
            <% }) %>
          </ul>
        <% } else {%>
          no locations have been added to this list yet.
        <% } %>
        <input type="hidden" name="locations" value="<%= locations %>"/>
        <br>

        <label for="zip" class="label">ZIP Code:</label>
        <input type="text" name="zip" id="zip" class="input"/>
        <button
          type="submit"
          name="add"
          id="add"
          class="button"
          value="adding"
          >Add Location</button><br><%= message || '' %><br>

        <input type="hidden" name="source" value="/lists/<%= list._id %>/edit">

        <button type="submit" id="create" class="button">Edit List</button>
    </form>
  </div>
  </body>
</html>